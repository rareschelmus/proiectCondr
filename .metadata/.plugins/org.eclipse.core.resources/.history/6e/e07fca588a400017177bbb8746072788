package model;

import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.Scanner;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/TestL")
public class TestL extends HttpServlet {
	private static final long serialVersionUID = 1L;

    public TestL() {
        super();
    }

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		doPost(request,response);	
	}


	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		URL url = new URL("https://freegeoip.net/json");

	    HttpURLConnection connection = (HttpURLConnection) url
	            .openConnection();
	    connection.setDoInput(true);
	    
        connection.connect();
        
        String x,y;
	    
        if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) {
	        
        	Scanner a = new Scanner (connection.getInputStream());
        	String ab = "";
        	while (a.hasNext()) ab+=a.next();
        	x= ab.split(":")[9].split(",")[0];
        	y= ab.split(":")[10].split(",")[0];
        	//http://samples.openweathermap.org/data/2.5/weather?lat=35&lon=139&appid=5320ff8302cdcb9ebfbca1142b1a2df5
        } 
	}

}
